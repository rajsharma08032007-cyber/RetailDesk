<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RetailDesk</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Shim process.env for browser compatibility
      window.process = window.process || { env: { API_KEY: "" } };
      
      window.addEventListener('error', function(event) {
        const errorDisplay = document.getElementById('error-overlay');
        if (errorDisplay) {
          errorDisplay.style.display = 'flex';
          const msg = document.getElementById('error-message');
          msg.textContent = event.error ? event.error.stack || event.error : event.message;
        }
      });

      tailwind.config = {
        theme: {
          extend: {
            colors: {
              slate: {
                850: '#1e293b', 
                950: '#020617',
              }
            }
          }
        },
        darkMode: 'class',
      }
    </script>
    <style>
      ::-webkit-scrollbar { width: 8px; height: 8px; }
      ::-webkit-scrollbar-track { background: #0f172a; }
      ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
      ::-webkit-scrollbar-thumb:hover { background: #475569; }
      #error-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.95);
        color: #f87171;
        z-index: 9999;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react/": "https://esm.sh/react@^19.2.3/",
        "react": "https://esm.sh/react@^19.2.3",
        "@google/genai": "https://esm.sh/@google/genai@^1.37.0",
        "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
        "react-markdown": "https://esm.sh/react-markdown@^10.1.0",
        "recharts": "https://esm.sh/recharts@^3.6.0",
        "lucide-react": "https://esm.sh/lucide-react@^0.562.0"
      }
    }
    </script>
  </head>
  <body class="bg-slate-950 text-slate-200 antialiased selection:bg-emerald-500/30 selection:text-emerald-200">
    <div id="error-overlay">
      <h1 style="font-size: 1.5rem; font-weight: 900; color: white; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.1em;">System Runtime Fault</h1>
      <pre id="error-message" style="background: #111; padding: 1.5rem; border: 1px solid #333; border-radius: 0.75rem; max-width: 100%; overflow: auto; font-size: 0.75rem; line-height: 1.5;"></pre>
      <button onclick="location.reload()" style="margin-top: 2rem; padding: 0.75rem 1.5rem; background: #ef4444; color: white; font-weight: 900; border: none; border-radius: 0.5rem; cursor: pointer; text-transform: uppercase; font-size: 0.7rem; letter-spacing: 0.2em;">Force Reboot System</button>
    </div>
    <div id="root"></div>
    <script type="module" src="./index.tsx"></script>
  </body>
</html>